<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSwVShzViQIbBBQjW5BYaPkD1ctm7ZlFkf0alJ7TIFwT13ejB3S31nDMwy9XD6V-QyuA0w&usqp=CAU" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>Rose Game</title>
    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Step fade css -->
    <link rel="stylesheet" href="./Css/state.css">
    
</head>
<body>
    <div class="main2-regist">
        <div id="content1">1 2 3 玫瑰人</div>
        <div id="content2">遊戲名稱</div>
        <input id="content3">
        <!-- <div>choise model:</div> -->
        <button id="registButton">註 冊</button>  <!-- regist name, model, and ios check -->
    </div>
</body>
<script>
    $('#registButton').click(()=>{
            let value = $('#content3').val();
            localStorage.setItem("cookieName", value);
            localStorage.setItem("refreshCount",0);

            var cookieName = localStorage.getItem("cookieName");
            console.log(cookieName,cookieName.length)

            document.getElementById('content3').value = "";
            // $("input").attr("disabled", true);
            // $("#content3").attr("disabled", true);
            // $("input").prop("disabled", true);
            // $("#content3").prop("disabled", true);

            // $('#content3').empty(); 
            $("#content3").blur();
            $('#content3').remove();
            // // $('#content3').remove();
            // $("input").attr("disabled", true);
            // $("#content3").attr("disabled", true);
            // $("input").prop("disabled", true);
            // $("#content3").prop("disabled", true);
            // document.getElementById('content3').value = "";
            if(cookieName.length<1){
                alert('請輸入角色名稱!')
                location.href = ''
            }else{
                iosCheck()
                location.href = '/'
            }
        }
    )

    function iosCheck(){
        if (typeof DeviceMotionEvent.requestPermission === 'function') {
            DeviceMotionEvent.requestPermission().then(permissionState => {
                if (permissionState === 'granted') {
                    // shakeInit() //搖一搖
                    console.log('搖晃權限已開通!')
                } else if(permissionState === 'denied'){// 開啟的連結不是https開頭
                    alert("當前IOS系統拒絕訪問動作與方向。請退出瀏覽器，重新進入活動頁面獲取許可權。")
                }
            }).catch((error) => {
                alert("請求裝置方向或動作訪問需要使用者手勢來提示")
            })
        } else {
            // 處理常規的非iOS 13+裝置
            // alert("處理常規的非iOS 13+裝置")
            alert('註冊成功，即將進入遊戲畫面 ! ');
        }
    }

</script>
</html>