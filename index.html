<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSwVShzViQIbBBQjW5BYaPkD1ctm7ZlFkf0alJ7TIFwT13ejB3S31nDMwy9XD6V-QyuA0w&usqp=CAU" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>Rose Game</title>

    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- AXios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <!-- Shake js -->
    <script src="./Js/shakeLib.js"></script>
    <script src="./Js/shakeInit.js" type="module"></script>

    <!-- Step fade css -->
    <link rel="stylesheet" href="./Css/state.css">

    <!--Tween-->
    <script type="text/javascript" src="./Js/jsm/greensock/TweenMax.min.js"></script>

    <script src="./Js/stateAPI.js" type="module"></script>
    <script src="./Js/countFunction.js" type="module"></script>
    <script src="./Js/webglCanvas.js" type="module"></script>
    <script>
        try {
            // ReferenceError
            // foo++;              
            var cookieName = localStorage.getItem("cookieName");
            console.log('try :',cookieName)
        } catch (exception) {
            //  ReferenceError: foo is not defined
            console.log(`${exception.name}: ${exception.message}`)
        }

        // save data value

        // localStorage.setItem("cookieName", "");

        // retrieve data value

        var cookieName = localStorage.getItem("cookieName");
        console.log(cookieName ,cookieName.length)
        if(cookieName.length<1){
            // $("a").attr("href", "http://www.google.com/")
            location.href = './regist.html'
        }else{
            var refeshCount = localStorage.getItem("refreshCount");
            refeshCount += 1;
            localStorage.setItem("refreshCount",refeshCount);

            if (refeshCount ==1 ) location.reload()
        }

        

    </script>


</head>
<body>
    <!-- <div class="main2-regist">
        <div id="content1">1 2 3 玫瑰人</div>
        <div id="content2">遊戲名稱</div>
        <input id="content3" required autofocus>
        <button id="registButton">註 冊</button>  
    </div> -->
    <div class="main3">
        <div class="stateClass">non</div>
        <div class="nameClass">Unregister</div>
        <div class="countClass">步數 : 0 / 300</div>
        <div class="uuidClass">uuid: undefined</div>
        <button class="re-regist">Log-out</button>
        <canvas id="main3-canvas"></canvas>
    </div>

    <div class="main4-out">
        失敗 !
        <button id="refightButton">重新挑戰</button>
    </div>

    <div class="main5-win">
        W I N ! 
   </div>
    <!-- <button id="testCountButton"  >Run</button> -->

</body>
<script>
        // console.log('dif scope:',name)
        // $(".main2-regist").hide()
        // $(".main3").hide()
        $(".main4-out").hide();
        $(".main5-win").hide();
</script>
<script type="module">
    import {registNameAPI} from './Js/stateAPI.js'
    import {reCount} from './Js/countFunction.js'
    
    $('#refightButton').click(()=>{
        reCount()
    })

    $('.re-regist').click(()=>{
        
        if (confirm('您是否要重新註冊遊戲角色?')) {
            // yourformelement.submit();
            localStorage.setItem("cookieName", '');

            location.href = './regist.html'

        } else {
            return false;
        }
    

    })


    // let value = $('#content3').val();
    console.log('value 54',cookieName);
    $(".nameClass").text(`ID : ${cookieName}`);
    // $(input).attr('disable', true)
    // $("#content3").prop('disabled', true);
    registNameAPI(cookieName)

    
</script>

</html>