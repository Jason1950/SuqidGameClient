<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSwVShzViQIbBBQjW5BYaPkD1ctm7ZlFkf0alJ7TIFwT13ejB3S31nDMwy9XD6V-QyuA0w&usqp=CAU" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rose Game</title>

    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- AXios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <!-- Shake js -->
    <script src="./Js/shakeLib.js"></script>
    <script src="./Js/shakeInit.js" type="module"></script>

    <!-- Step fade css -->
    <link rel="stylesheet" href="./Css/state.css">

    <!--Tween-->
    <script type="text/javascript" src="./Js/jsm/greensock/TweenMax.min.js"></script>

    <script src="./Js/stateAPI.js" type="module"></script>
    <script src="./Js/countFunction.js" type="module"></script>
    <script src="./Js/webglCanvas.js" type="module"></script>


</head>
<body>
    <div class="main3">
        <div class="stateClass">non</div>
        <div class="countClass">步數 : 0 / 300</div>
        <canvas id="main3-canvas"></canvas>
    </div>

    <div class="main4-out">
         O U T ! 
    </div>

    <div class="main5-win">
        W I N ! 
   </div>
    <!-- <button id="testCountButton"  >Run</button> -->
    <button id="iosCheckButton"  >ios Check</button>

</body>

<script>
    $(".main4-out").hide();
    $(".main5-win").hide();

    $("#iosCheckButton").click(
        () => {
            if (typeof DeviceMotionEvent.requestPermission === 'function') {
                DeviceMotionEvent.requestPermission().then(permissionState => {
                    if (permissionState === 'granted') {
                        shakeInit() //搖一搖
                    } else if(permissionState === 'denied'){// 開啟的連結不是https開頭
                        alert("當前IOS系統拒絕訪問動作與方向。請退出微信，重新進入活動頁面獲取許可權。")
                    }
                }).catch((error) => {
                    alert("請求裝置方向或動作訪問需要使用者手勢來提示")
                })
            } else {
                // 處理常規的非iOS 13+裝置
                alert("處理常規的非iOS 13+裝置")
            }
        }
    )
</script>

</html>